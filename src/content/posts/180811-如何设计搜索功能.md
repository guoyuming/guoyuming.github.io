---
title: "如何设计搜索功能"
---

用户来到App，浏览时不断在寻找信息，这个信息可以是一件商品、一片文章，一个用户；具体想找什么、给什么结果、突出展示什么，视产品类型而定。有明确目标用户，更多依靠搜索来寻找他们所要的信息。产品搜索系统主要为了提升检索和发现信息的效率。效率来自两方面：1）搜索关键词返回准确，以及对结果筛选和排序；2）由运营配置或算法推荐，主动引导用户搜索更多符合他需求的关键词。

两方面都是大话题，比如对结果的排序，都会有专门的职位：不断扩充词库、调整算法、优化展示，让结果更准确呈现。我们无法管中窥豹结果排序、个性推荐这些看不见的、在后台执行的模块；但可以盲人摸犬地在客户端搜索引导和结果页面，找出某些共性。

## 入口

产品用户体量大，第一件事给用户切片分类，比如淘宝，为了满足明确想买某物用户、逛的用户、有模糊目的用户，在首页将各种功能和栏目集大成。这类产品将搜索框放在顶部，加上引导点击行动的占位文案。在首页这种寸土寸金的地方，搜索框占据过多空间。只是对大部分产品，搜索还是很重要的内部流量分发入口，以及过去互联网资源不够丰富、不够有序留下的操作习惯，让即使是不那么依靠搜索的信息流产品，如今日头条，也将搜索框做在首页顶部。因为搜索框占空间大，京东和大众点评将Banner图或顶部装饰图，放到了搜索框下面一层，类似背景图。

用户习惯在改变，从主动搜索到社交推荐、自动个性定制，搜索入口交互会变得越来越轻。AirBnB将导航栏和搜索框合二为一，习惯顶部搜索入口的用户应该会觉得这是个好设计。Medium搜索入口在右上角图标，让整体设计的感知更偏向博客或杂志。西瓜视频和火山视频把将代表搜索的放大镜图标放到屏幕边角，留出更多视频卡片空间，让用户直接离内容更近。

## 搜索引导页

一般标配以下交互和内容：

- 自动调起默认键盘，键盘挡住部分页面内容，屏幕滚动，键盘收起
- 输入框位符，类似Call to action的动作指向话语，引导用户点击
- 搜索历史记录
    - 如果标签多行排列，节省空间，更少内容被键盘挡住
    - 如果列表展示，一行一条记录，设计上更加优雅简洁
    - 如果条件太多，尤其是组合了筛选和分类，可单独保存“组合订阅条件”，比如链家搜房子

除了明确目标关键词的主动搜索，大部分App还有搜索发现，呈现几排关键词，引导需求模糊、不知道如何写关键词的用户行动。

搜索发现关键词可以有以下来源：

- 人工或机器自动根据热门关键词配置
- 基于用户画像推荐并展示，画像可以是位置、行为、或自己填写的个人介绍
- 搜索记录、浏览记录的关联词推荐
- 需要推广的运营活动
- 关键词也是广告位，比如O2O类产品，广告主商家名字作为关键词

## 搜索结果页

输入关键词后返回的结果列表，按照相关度排序呈现给用户。相关度背后，算法可以很复杂，也有很多种方法，之后会专门写一篇来讲。如果搜索系统是为了提高搜索效率，单纯给一堆相关度结果，用户还是没有找到自己所想要。这时候，启用搜索结果页三大法宝：分类、排序和过滤。

- 分类：适合内容类别差异大，每个类别下内容多的产品；比如QQ音乐的歌单、歌曲、专辑
- 排序：价格、距离、好评…… 根据自己家产品定义哪些属性重要
- 过滤：一般有单选框、多选框、多选标签等组件

其中分类和过滤，一个是在粗力度，我要哪类内容；一个更细粒度，在同类内容中，我要哪个内容单元，同类东西才有比较和过滤的属性基础。某些LBS服务产品，还支持视图切换，比如从列表切换到地图，也是提高寻找效率的办法。另外，还有些重运营的产品，会在搜索结果中插入人工编辑或机器生成的内容，引导用户进入专栏、内容列表页面；如果推荐合理，这也是一种搜索发现的解决办法。

## 进阶：动态联想&搜索

这也是客户端看似简单，后台默默大量计算的模块。和输入法动态联想类似，搜索前一两个字，联想一列关键词，点击，返回结果，提高输入和获得结果的效率。在搜索中，动态联想主要解决三个问题，不同产品侧重不同：

1）减少输错而没有结果或结果不准，继续重复输入；
2）用户搜索时可能对关键词记忆不准确，或太笼统，联想相当于帮他更精确定位颗粒度更细的关键词；
3）如果用户大量使用类别作为关键词，联想起到流量分发的作用，比如在音乐App中输入“爵士”，联系引导到各个细分到子类目或内容专题

联想的方式和规则，有以下几种：

- 匹配词库：适用通用标准类词语，如地名
    - 全段匹配：只要输入的字和关键词中任意位置字匹配，即联想；比如旅游App中输入“龙”，出来“龙虎山”、“九龙湖”
    - 位置匹配：位置和词都匹配才联想，比如输入“北”只出现第一个字是‘北’的关键词，输入“北京”只出现头两个字是‘北京’的关键词
- 匹配全域内容：任何内容（标题、主题、词条、正文）任何位置，只要带有输入的字，即出现在结果列表

除了动态联想关键词，有些产品直接动态搜索，这对后台要求可能更高。比如Medium输入框，当只输入一个字母时，检测到若干毫秒无继续输入，自动执行搜索，展示结果。

## 总结

做搜索系统，功夫更多在后台。关键词的匹配、检索、排序，做得好需要算法支持；在结果中排序和筛选，也要不断和后台交互。在结果分类、筛选和排序中，发现哪些维度或属性对用户更重要，让用户更容易发现和操作它们。